<section>
  <div class='card'>
    <div class='card-header'>
      {{prev-next model=model sortedArray=sortedOutcomes}}
      <h4>
        {{html-safe model.name}}
      </h4>
    </div>
    <div class='card-body'>
      {{!-- <section>
      {{#if model.contest.notQualifier }}
        {{#power-select
          options=model.contest.groupOptions
          selected=model.contest.group
          onchange=(action (mut model.contest.group))
          onclose=(action "saveModel" model.contest)
          placeholder="Choose Award Winner"
          searchField='name'
          allowClear=true
          disabled=model.contest.isDisabled
          as |group|
        }}
          Winner: {{html-safe group.name}}
        {{/power-select}}
      {{else}}
        (Qualifiers are determined by rule and appear on the OSS)
      {{/if }}
      </section> --}}

      <section>
          <p>
            <label>Result as Printed on OSS: </label>
            {{input
              class='form-control'
              type='text'
              value=model.winner
              disabled=model.isDisabled
              placeholder='Result populated on Round Completion'
              change=(perform autosave 'winner' value='target.value')
            }}
          </p>

          <p>
            <label>
            {{input
              type='checkbox'
              checked=model.printed
              disabled=model.printOnFinalsOss
              click=(perform autosave model)
            }} Printed on OSS</label>
          </p>

          {{#if (and model.isSingle (if model.isFinals false true))}}
          <p>
            <label>
            {{input
              type='checkbox'
              checked=model.printOnFinalsOss
              click=(perform autosave model)
            }} Include on Finals OSS</label>
          </p>
          {{/if}}
      </section>
      <section>
        <div class='table-responsive'>
          <table class='table table-hover table-sm'>
              <caption>
                Contenders for this particular award.
                {{#if (eq model.level 'Improved - Standard')}}
                  <br/><br/>
                  <p>Points minus base score, highest number is winner. (<em>Must have a positive differential</em>)<br/>
                  In the case of a tie, winner will be the group with lowest total score.</p>
                {{/if}}
                {{#if (eq model.level 'Improved - Raw')}}
                  <br/><br/>
                  <p>Points minus base score, highest number is winner. (<em>Can have a negative differential</em>)<br/>
                  In the case of a tie, winner will be the group with lowest total score.</p>
                {{/if}}
              </caption>
            <thead class='thead-light'>
              <tr>
                <th>Name</th>
                <th>Points</th>
                {{#if (or (eq model.level 'Improved - Standard')(eq model.level 'Improved - Raw'))}}
                  <th>Base Score</th>
                  <th>Difference</th>
                {{/if}}
              </tr>
            </thead>
            <tbody>
              {{#if (or (eq model.level 'Improved - Standard')(eq model.level 'Improved - Raw'))}}
                {{#each sortedImprovedContenders as |contender|}}
                    <tr>
                      <td>
                        {{html-safe contender.name}}
                      </td>
                      <td>
                        {{contender.runTotSum}}
                      </td>
                      {{#if (or (eq model.level 'Improved - Standard')(eq model.level 'Improved - Raw'))}}
                        <td>{{contender.base}}</td>
                        <td>{{contender.diff}}</td>
                      {{/if}}
                    </tr>
                {{else}}
                  <tr>
                    <td colspan=3>Standings not yet available.</td>
                  </tr>
                {{/each}}
              {{else}}
                {{#each sortedContenders as |contender|}}
                    <tr>
                      <td>
                        {{html-safe contender.name}}
                      </td>
                      <td>
                        {{contender.runTotSum}}
                      </td>
                    </tr>
                {{else}}
                  <tr>
                    <td colspan=3>Standings not yet available.</td>
                  </tr>
                {{/each}}
              {{/if}}
            </tbody>
          </table>
        </div>
      </section>
    </div>
    <div class='card-footer'>
      <ul class='list-inline'>
        {{#if (eq model.round.status 'Built')}}
          {{#if model.permissions.write}}
            <li>{{outcome-delete model=model}}</li>
          {{/if}}
        {{/if}}
        {{!-- <li class='pull-right'><h4>Contest Status: <strong>{{model.status}}</strong></h4></li> --}}
      </ul>
    </div>
  </div>
</section>